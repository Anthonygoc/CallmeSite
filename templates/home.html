{% extends 'base.html' %}
{% load static %}

{% block content %}
  <section class="container my-5">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h1>Ferramentas Profissionais para Desenvolvedores</h1>
        <p class="lead">Aumente sua produtividade com nossas solu√ß√µes inovadoras e eficientes</p>
        <a href="#produtos" class="btn btn-primary">Explorar Produtos</a>
      </div>
      <div class="col-md-6">
        <img src="{% static 'myapp/img/hero.jpg' %}" alt="Hero" class="img-fluid rounded shadow-sm">
      </div>
    </div>
  </section>

  <section id="produtos" class="bg-light py-5">
    <div class="container">
      <h2 class="text-center mb-5">Produtos em Destaque</h2>
      <div class="row g-4">

        {% comment %}
          In√≠cio do loop din√¢mico.
          Isso ir√° repetir o bloco de c√≥digo para cada 'produto' na lista 'produtos'
          que a view 'home' envia para o template.
        {% endcomment %}

        {% for produto in produtos %}
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">

            {% comment %} Exibe a imagem do produto ou uma imagem padr√£o {% endcomment %}
            {% if produto.imagem %}
              <img src="{{ produto.imagem.url }}" class="card-img-top" alt="{{ produto.nome }}">
            {% else %}
              <img src="{% static 'myapp/img/produto_default.png' %}" class="card-img-top" alt="Produto sem imagem">
            {% endif %}

            <div class="card-body d-flex flex-column">
              {% comment %} Exibe o nome e a descri√ß√£o do produto do banco de dados {% endcomment %}
              <h5 class="card-title">{{ produto.nome }}</h5>
              <p class="card-text">{{ produto.descricao|truncatewords:15 }}</p>

              {% comment %} As classes mt-auto, d-flex, etc., ajudam a alinhar o pre√ßo e o bot√£o no final do card {% endcomment %}
              <div class="mt-auto d-flex justify-content-between align-items-center">

                {% comment %} Exibe o pre√ßo do produto e o formata {% endcomment %}
                <strong class="text-primary fs-5">R$ {{ produto.preco }}</strong>

                {% comment %} Link que leva para a URL 'adicionar_ao_carrinho', passando o ID do produto {% endcomment %}
                <a href="{% url 'adicionar_ao_carrinho' produto.id %}" class="btn btn-sm btn-primary">Adicionar ao Carrinho</a>
              </div>
            </div>
          </div>
        </div>
        {% empty %}
          {% comment %} Este bloco ser√° exibido se a lista 'produtos' estiver vazia {% endcomment %}
          <div class="col-12">
            <p class="text-center">Nenhum produto em destaque no momento. Adicione produtos no painel de administra√ß√£o.</p>
          </div>
        {% endfor %}

      </div>
    </div>
  </section>

  <section class="py-5 text-center">
    <div class="container">
      <h2 class="mb-4">Por que escolher nossos produtos?</h2>
      <div class="row">
        <div class="col-md-3"><p>üöÄ <br> Alta Performance</p></div>
        <div class="col-md-3"><p>üîí <br> Seguran√ßa</p></div>
        <div class="col-md-3"><p>‚öôÔ∏è <br> Produtividade</p></div>
        <div class="col-md-3"><p>‚úÖ <br> Confiabilidade</p></div>
      </div>
    </div>
  </section>

  <section class="bg-primary text-white py-5 text-center">
    <div class="container">
      <h3>Fique por dentro das novidades</h3>
      <p class="mb-4">Receba atualiza√ß√µes sobre novos produtos e ofertas especiais</p>
      <div class="row justify-content-center">
        <div class="col-md-4">
          <input type="email" class="form-control" placeholder="Seu e-mail">
        </div>
        <div class="col-auto">
          <a href="{% url 'registro_usuario' %}" class="btn btn-dark">Inscrever-se</a>
        </div>
      </div>
    </div>
  </section>
{% endblock %}